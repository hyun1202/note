# 도메인
- 소프트웨어 개발에서의 도메인은, 사용자들의 활동이나 관심사와 관련이 있다.
- 사용자가 프로그램, 또는 소프트웨어 서비스를 적용하는 주제 영역을 도메인
- 소프트웨어가 도메인을 반영하도록 만들어야 한다.

## 도메인 모델?
- 소프트웨어는 **도메인의 핵심 개념과 요소들을 통합하고, 그 관계를 정확하게 구현**해야 한다.....?
	- **도메인을 모델링**해야 한다.
	- 도메인=현실 세계의 일부, 단순히 코드로 옮길 수 없음
	- 따라서 도메인의 추상화인 **도메인 모델**을 만들어야 한다.
	- 도메인 모델 = 소프트웨가 해결하려는 특정 문제 영역(도메인)의 핵심지도
- 도메인에 존재하는 중요한 개념과 이들 사이의 관계, 그리고 규칙을 표현!

```
ex
온라인 서점을 운영
도메인: 책, 고객, 주문, 장바구니.. 
규칙:
고객은 책을 주문한다.
장바구니의 책의 가격과 수량을 가지고 총액을 계산한다.
```

## 도메인 주도 설계(DDD)
- 도메인의 **복잡성이 주는 문제를 해결**하기 위한 접근 방법
- **도메인 모델을 개발 과정의 중심** 에 두는 방법 
- 개발자 뿐만 아니라, 이해 관계자가 모두 참여해서 함께 도메인 모델을 만들고 계속 발전시켜야 한다
	- 도메인 모델이 설계와 코드까지 이어져야 한다....
	- 분석.. 설계.. 구현,,,
- 팀 안에서 **도메인 모델에 기반한 단일 어휘체계**를 만들고, 이를 문서, 회의, 대화 그리고 코드까지 일관되게 사용 (보편 언어)
- 도메인 모델과 보편 언어를 프로젝트에 기록!!
	- 용어사전.md
	- 도메인 모델.md
	- 다이어그램... 등,

## 도메인 모델 만들기
- 시작: 듣고 배우기
	- 컨셉, 관계, 규칙..등 업무 처리 방식을 듣고 배운다.
	- 1. '중요한 것' (개념 식별)
		- 중요 단어 등..
	- 2. 연결 고리 찾기 **(관계 정의)**
	- 3. '것'들을 설명하기 (속성 및 기본 행위 명시)
	- 4. 시각화
	- 5. 이야기하고 다듬기,, (반복)

### 도메인 전문가가 없다면??
- 창업가, 기획자, PO를 가상의 도메인 전문가로 활용
- 다양한 탐색과 집단적인 학습 -> 이벤트 스토밍
- 가설 기반의 점진적인 모델링
- 보편 언어의 의식적인 구축과 진화
- 베타 테스터, 초기 사용자와의 적극적인 소통
- 도메인 모델의 발전과 진화, 공유를 더욱 적극적
- 경쟁 업체 서비스 분석!

## Entity (엔티티)
- 도메인 모델을 만들 때 사용
- 도메인 안에 있는 대상이나 개념
- **고유한 식별자를 가지고 이를 통해서 개별적으로 구분**된다.
- 생명주기를 가진다. (시간의 흐름에 따라 **상태가 변경**될 수 있다.)

## 도메인 모델 패턴
- 도메인/비즈니스 로직을 구성하는 아키텍처 패턴의 한 가지..?
	- 도메인 모델 패턴, 트랜잭션 스크립트 등...
- 도메인 모델의 **속성과 행위를 모두 포함**하는 도메인의 오브젝트 모델
	- 오브젝트 모델이므로 복잡한 연관 관계, 커스텀 속성, 상속 등을 사용할 수 있다.
- 트랜잭션 스크립트는 하나의 업무절차를 처리하기 위한 스크립트(메소드)를 만들고 비즈니스 로직을 순서대로 코드로 작성하는 방법.

## 값 객체 (Value Object)
- 도메인 모델에서 **식별자가 필요하지 않고 속성/값으로만 구별**되는 오브젝트
- 엔티티가 너무 많은 책임을 가지는 것을 방지
- 특정 속성 관련 행위를 분리해서 엔티티를 더 집중된 상태로 유지하게 한다.
- 원시 타입보다는 도메인 개념을 더 명시적으로 나타내서 모델의 명확성을 높인다.
- 생성 이후에 상태가 변하지 않고 **변경이 필요하면 새로운 객체로 교체한다**.
- 자체 유효성 검사 가능

### 원시 타입을 객체로 교체 - 리팩터링 방법
- 원시 타입의 남용을 개선하고 코드의 **명시성과 안정성을 높이는 리팩터링 방법**이다.
- 값 객체는 **도메인 모델의 핵심 구성 요소**로 **값 그 자체의 의미**를 담아내고, 불변성, 동등성 등의 도메인 로직을 포함하여 설계하는 방식이다.

## 도메인 모델 패턴의 두 가지 스타일
1. 단순 도메인 모델
	DB설계와 유사, 테이블에 대해 하나의 도메인 오브젝트
2. 풍성한 도메인 모델
	상속, 전략, GoF 디자인 패턴, 연관 관계
	복잡한 로직에 적합하지만 DB 매핑이 어려울 수 있다.

## 도메인 로직의 API 개발
- 도메인 모델 패턴은 트랜잭션 스크립트 처럼 작업 단위의 절차형 API를 만들기가 어렵다.
- 도메인 로직의 명확한 작업 단위 API를 제공하는 **애플리케이션 서비스가 필요**하다.