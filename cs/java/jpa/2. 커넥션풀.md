# 커넥션 풀
* 데이터베이스 커넥션을 매번 획득해야 한다.
	* db 드라이버가 tcp/ip커넥션을 연결 -> 3 way handshake와 같은 네트워크 동작 발생
* 커넥션을 새로 만드는 것은 과정도 복잡하고 시간, 리소스가 많이 소모된다.
* 위 문제를 해결하기 위해 **커넥션을 미리 생성해두고 사용하는 방법인 커넥션 풀**방법을 사용한다.

## 사용
초기화
* 어플리케이션 시작 시점에 커넥션을 미리 확보해서 풀에 보관한다. (기본값은 보통 10)
사용
* 커넥션 풀에 커넥션을 요청하면 커넥션 풀은 자신이 가지고 있는 커넥션 중 하나를 반환
* 커넥션 풀에 들어있는 커넥션은 TCP/IP로 DB와 연결되어 있으므로 즉시 SQL을 DB에 전달할 수 있다.
* 모두 사용하고 나면 종료하는 것이 아니라 그대로 커넥션 풀에 반환한다.

커넥션 풀은 서버당 최대 커넥션 수를 제한할 수 있다
	DB에 무한정 연결이 생성되는 것을 막아준다.
대표적인 커넥션 풀 오픈 소스는 `HikariCP`, `tomcat-jdbc pool`등이 있다.
스프링 부트 2.0부터는 기본 커넥션 풀로 `HikariCP`를 사용한다.

## DataSource
* `DriverManager`를 사용하여 커넥션을 획득하다 `HikariCP`와 같은 커넥션 풀을 사용하도록 변경하면 애플리케이션 코드도 함께 변경해야한다.
	* `DriverManager`는 `DataSource`인터페이스를 사용하지 않으므로 `DataSource` 기반의 커넥션 풀을 사용하도록 변경하면 관련 코드를 다 고쳐야한다.
	* 이 문제를 해결하기 위해 `DriverManagerDataSource`라는 어뎁터 클래스를 제공한다.
* 이 문제를 해결하기 위해 커넥션을 획득하는 방법을 추상화하는 인터페이스를 제공한다.
